// TODO: first build the model, then use it to generate the code for the main function